<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Onde Padre Pio celebrava, o ParaÃ­so se fazia presente | LÃ¢mpadas Acesas</title>

  <!-- SEO -->
  <meta name="description" content="Homilia/palestra legendada em PT-BR. Onde Padre Pio celebrava, o ParaÃ­so se fazia presente">
  <meta name="keywords" content="catÃ³lico, evangelizaÃ§Ã£o, legenda portuguÃªs, outros">
  <meta name="author" content="LÃ¢mpadas Acesas">

  <!-- Open Graph (preview no WhatsApp, Telegram, Facebook) -->
  <meta property="og:type"        content="video.other">
  <meta property="og:title"       content="Onde Padre Pio celebrava, o ParaÃ­so se fazia presente | LÃ¢mpadas Acesas">
  <meta property="og:description" content="Homilia/palestra legendada em PT-BR. Onde Padre Pio celebrava, o ParaÃ­so se fazia presente">
  <meta property="og:image"       content="https://lampadasacesas.com.br/assets/thumbnails/PEkn_CQOhfc.jpg">
  <meta property="og:image:width" content="1280">
  <meta property="og:image:height" content="720">
  <meta property="og:url"         content="https://lampadasacesas.com.br/videos/outros/dove-padre-pio-haiku">
  <meta property="og:site_name"   content="LÃ¢mpadas Acesas">
  <meta property="og:locale"      content="pt_BR">

  <!-- Twitter Card -->
  <meta name="twitter:card"        content="summary_large_image">
  <meta name="twitter:title"       content="Onde Padre Pio celebrava, o ParaÃ­so se fazia presente">
  <meta name="twitter:description" content="Homilia/palestra legendada em PT-BR. Onde Padre Pio celebrava, o ParaÃ­so se fazia presente">
  <meta name="twitter:image"       content="https://lampadasacesas.com.br/assets/thumbnails/PEkn_CQOhfc.jpg">

  <!-- PWA -->
  <link rel="manifest" href="../../manifest.json">
  <meta name="theme-color" content="#5a0000">
  <link rel="apple-touch-icon" href="../../assets/icon-192.png">

  <!-- Favicon -->
  <link rel="icon" href="../../assets/favicon.ico" type="image/x-icon">

  <!-- Estilos -->
  <link rel="stylesheet" href="../../assets/style.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-G8LLHBT6XH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-G8LLHBT6XH');
  </script>
</head>
<body>

  <!-- BANNER WEBVIEW (Fase 3.2) â€” visivel apenas no navegador interno do WhatsApp/Instagram -->
  <div id="webview-banner" class="webview-banner" style="display:none">
    <span>ğŸ“± Para melhor experiÃªncia (legendas + Chromecast):</span>
    <a id="webview-chrome-link" href="#" class="webview-btn">Abrir no Chrome</a>
    <button onclick="document.getElementById('webview-banner').style.display='none'" class="webview-close">âœ•</button>
  </div>

  <!-- HEADER -->
  <header class="site-header">
    <a href="../../index.html" class="logo">
      ğŸ•¯ï¸ LÃ¢mpadas Acesas
    </a>
    <nav>
      <a href="../../index.html">InÃ­cio</a>
      <a href="../outros/index.html">Outros</a>
    </nav>
  </header>

  <!-- BREADCRUMB -->
  <div class="breadcrumb">
    <a href="../../index.html">InÃ­cio</a>
    <span>â€º</span>
    <a href="../outros/index.html">Outros</a>
    <span>â€º</span>
    <span>Onde Padre Pio celebrava, o ParaÃ­so se fazia prese...</span>
  </div>

  <!-- CONTEÃšDO PRINCIPAL -->
  <main class="video-page">

    <!-- TÃTULO -->
    <h1 class="video-title">Onde Padre Pio celebrava, o ParaÃ­so se fazia presente</h1>
    <p class="video-meta">ğŸ“º Padre Pio TV &nbsp;|&nbsp; ğŸ“… Legendado em 28/02/2026 &nbsp;|&nbsp; ğŸŒ Legenda: PT-BR</p>

    <!-- PLAYER DO YOUTUBE -->
    <div class="video-container" id="video-container">
      <div class="video-wrapper" id="video-wrapper">
        <iframe
          id="yt-player"
          src="https://www.youtube.com/embed/PEkn_CQOhfc?rel=0&modestbranding=1&cc_load_policy=0&enablejsapi=1"
          title="Onde Padre Pio celebrava, o ParaÃ­so se fazia presente"
          frameborder="0"
          allowfullscreen
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share">
        </iframe>

        <!-- OVERLAY DE LEGENDA ESTILO NETFLIX (Fase 2.1) -->
        <!-- VisÃ­vel apenas em fullscreen via classe CSS :fullscreen -->
        <div class="subtitle-overlay" id="subtitle-overlay" aria-live="polite">
          <span class="subtitle-overlay-text" id="subtitle-overlay-text"></span>
        </div>
      </div>

      <!-- LEGENDA SINCRONIZADA â€” BARRA ABAIXO (modo normal) -->
      <div class="subtitle-bar">
        <div id="subtitle-display" class="subtitle-text">
          â–¶ Pressione play para ver as legendas sincronizadas
        </div>
      </div>
    </div>

    <!-- CONTROLES DE LEGENDA -->
    <div class="subtitle-controls">
      <label>Tamanho da fonte:
        <input type="range" id="font-size-slider" min="12" max="32" value="22">
        <span id="font-size-value">22px</span>
      </label>
      <button id="btn-transcricao" onclick="toggleTranscricao()">ğŸ“– Ver transcriÃ§Ã£o completa</button>
      <button id="btn-fullscreen" onclick="toggleFullscreen()">â›¶ Tela Cheia c/ Legendas</button>
      <!-- BotÃ£o TV Mode (Fase 2.2) -->
      <button id="btn-tv-mode" onclick="ativarModoTV()">ğŸ“º Assistir na TV</button>
      <a href="https://www.youtube.com/watch?v=PEkn_CQOhfc" target="_blank" class="btn-original">
        ğŸ“º Ver no YouTube original
      </a>
    </div>

    <!-- INSTRUÃ‡ÃƒO TV (Fase 2.3) â€” aparece apÃ³s ativar TV Mode -->
    <div id="instrucao-tv" class="instrucao-tv" style="display:none">
      <span id="instrucao-tv-texto"></span>
      <button onclick="fecharInstrucaoTV()" class="instrucao-tv-close">âœ•</button>
    </div>

    <!-- TRANSCRIÃ‡ÃƒO COMPLETA (oculta por padrÃ£o) -->
    <div id="transcricao-completa" class="transcricao" style="display:none">
      <h2>ğŸ“– TranscriÃ§Ã£o completa em PT-BR</h2>
      <div id="transcricao-texto"></div>
    </div>

    <!-- COMPARTILHAR -->
    <div class="share-section">
      <h3>ğŸ“¢ Compartilhar esta evangelizaÃ§Ã£o</h3>
      <div class="share-buttons">
        <a href="https://wa.me/?text=Onde%20Padre%20Pio%20celebrava%2C%20o%20Para%C3%ADso%20se%20fazia%20presente%20-%20Legendado%20em%20PT-BR%0Ahttps%3A//lampadasacesas.com.br/videos/outros/dove-padre-pio-haiku"
           target="_blank" class="btn-share btn-whatsapp">
          ğŸ“± WhatsApp
        </a>
        <a href="https://t.me/share/url?url=https%3A//lampadasacesas.com.br/videos/outros/dove-padre-pio-haiku&text=Onde%20Padre%20Pio%20celebrava%2C%20o%20Para%C3%ADso%20se%20fazia%20presente%20-%20Legendado%20em%20PT-BR"
           target="_blank" class="btn-share btn-telegram">
          âœˆï¸ Telegram
        </a>
        <button onclick="copiarLink()" class="btn-share btn-copy">
          ğŸ”— Copiar link
        </button>
      </div>
    </div>

  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
    <p>ğŸ•¯ï¸ LÃ¢mpadas Acesas â€” EvangelizaÃ§Ã£o CatÃ³lica em PortuguÃªs Brasileiro</p>
    <p><small>Legendas geradas automaticamente com IA e revisÃ£o. ConteÃºdo original dos respectivos canais.</small></p>
  </footer>

  <!-- ===================================================================
       SCRIPTS
       =================================================================== -->
  <script>
    // â”€â”€â”€ DADOS SRT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const SRT_DATA = "1\n00:00:08,360 --> 00:00:13,480\nUm minuto com Padre Pio nos lugares do\n\n2\n00:00:10,480 --> 00:00:15,000\nconvento de San Giovanni Rotondo. Nos\n\n3\n00:00:13,480 --> 00:00:17,880\nencontramos em clausura, num canto da\n\n4\n00:00:15,000 --> 00:00:21,119\nclausura que nos permite recordar\n\n5\n00:00:17,880 --> 00:00:24,519\nalgo de excepcional que acontecia\n\n6\n00:00:21,119 --> 00:00:28,119\njustamente aqui, ali\u00e1s na Igreja, quando\n\n7\n00:00:24,519 --> 00:00:30,759\nPadre Pio disse \"Em torno do altar h\u00e1\n\n8\n00:00:28,119 --> 00:00:32,640\ntodo o Para\u00edso\". E o Senhor permitiu\n\n9\n00:00:30,759 --> 00:00:35,239\nque alguns poucos filhos espirituais\n\n10\n00:00:32,640 --> 00:00:39,879\npudessem ver com seus pr\u00f3prios olhos\n\n11\n00:00:35,239 --> 00:00:42,960\nessa maravilhosa realidade.\n\n12\n00:00:39,879 --> 00:00:46,760\nE aqui reproduzimos o belo testemunho\n\n13\n00:00:42,960 --> 00:00:48,879\nde Frei Daniele Natale que lhe foi\n\n14\n00:00:46,760 --> 00:00:51,239\nconfiado por uma carta escrita por\n\n15\n00:00:48,879 --> 00:00:54,480\nEnrico Cerioni,\n\n16\n00:00:51,239 --> 00:00:56,000\num sardo residente em Roma depois de ter\n\n17\n00:00:54,480 --> 00:00:58,239\npassado alguns dias em San Giovanni\n\n18\n00:00:56,000 --> 00:01:01,440\nRotondo. Ele escreve exatamente isto.\n\n19\n00:00:58,239 --> 00:01:02,960\nEnquanto, junto com os fi\u00e9is, eu aguardava\n\n20\n00:01:01,440 --> 00:01:05,159\nque Padre Pio viesse \u00e0 Igreja para\n\n21\n00:01:02,960 --> 00:01:07,920\ncelebrar a Santa Missa, vi sair\n\n22\n00:01:05,159 --> 00:01:10,280\nda sacristia duas filas de anjos\n\n23\n00:01:07,920 --> 00:01:12,680\nque o precediam. O padre tinha\n\n24\n00:01:10,280 --> 00:01:14,680\nao seu lado a Madonna, se aproximou\n\n25\n00:01:12,680 --> 00:01:17,200\ndo altar, enquanto a M\u00e3e de Deus se\n\n26\n00:01:14,680 --> 00:01:19,040\ncolocou a um lado. T\u00e3o logo come\u00e7ou o\n\n27\n00:01:17,200 --> 00:01:21,759\nSalmo 42,\n\n28\n00:01:19,040 --> 00:01:23,280\nPadre Pio se tornou luminoso e assim permaneceu\n\n29\n00:01:21,759 --> 00:01:25,920\npor todo o tempo da celebra\u00e7\u00e3o\n\n30\n00:01:23,280 --> 00:01:28,000\neucar\u00edstica. Na eleva\u00e7\u00e3o apareceu Jesus\n\n31\n00:01:25,920 --> 00:01:31,079\nque se fundia em Padre Pio. Eu fazia\n\n32\n00:01:28,000 --> 00:01:33,520\ndificuldade para distinguir essas duas pessoas.\n\n33\n00:01:31,079 --> 00:01:37,000\nNa comunh\u00e3o, a fus\u00e3o se tornou\n\n34\n00:01:33,520 --> 00:01:38,840\ntotal por efus\u00e3o de amor. Cerioni\n\n35\n00:01:37,000 --> 00:01:41,640\nconclu\u00eda o escrito pedindo a Frei\n\n36\n00:01:38,840 --> 00:01:44,920\nDaniele que perguntasse a Padre Pio se\n\n37\n00:01:41,640 --> 00:01:47,520\no que havia visto tinha sido apenas uma\n\n38\n00:01:44,920 --> 00:01:51,159\nsua imagina\u00e7\u00e3o fantasiosa ou se\n\n39\n00:01:47,520 --> 00:01:54,719\ncorrespondia \u00e0 realidade.\n\n40\n00:01:51,159 --> 00:01:59,280\nFrei Daniele, tendo recebido essa carta,\n\n41\n00:01:54,719 --> 00:02:02,680\nse dirige imediatamente a Padre Pio\n\n42\n00:01:59,280 --> 00:02:04,880\ne colocando-lhe nas m\u00e3os a carta de\n\n43\n00:02:02,680 --> 00:02:08,800\nEnrico lhe pergunta se aquele filho\n\n44\n00:02:04,880 --> 00:02:12,319\nespiritual tinha visto corretamente.\n\n45\n00:02:08,800 --> 00:02:15,360\nO padre percorre lentamente as linhas\n\n46\n00:02:12,319 --> 00:02:18,000\ndaquela carta e depois lhe diz: \"A primeira\n\n47\n00:02:15,360 --> 00:02:19,800\nparte, aquela que faz alus\u00e3o \u00e0 presen\u00e7a\n\n48\n00:02:18,000 --> 00:02:21,400\ndos anjos e da Madonna em torno\n\n49\n00:02:19,800 --> 00:02:23,519\ndo altar,\n\n50\n00:02:21,400 --> 00:02:26,160\n\u00e9 verdade\n\n51\n00:02:23,519 --> 00:02:30,519\ne permanece em sil\u00eancio.\n\n52\n00:02:26,160 --> 00:02:32,640\nDepois continua a examinar a carta.\n\n53\n00:02:30,519 --> 00:02:35,040\nPadre, diz fra Daniele, se a primeira\n\n54\n00:02:32,640 --> 00:02:38,599\nparte \u00e9 verdade, a segunda tamb\u00e9m \u00e9.\n\n55\n00:02:35,040 --> 00:02:42,840\nE padre Pio, como est\u00e1 mortificado!\n\n56\n00:02:38,599 --> 00:02:42,840\nfaz um sinal de cabe\u00e7a.\n";

    function parseSRT(srt) {
      const blocks = srt.trim().split(/\r?\n\r?\n/);
      return blocks.map(block => {
        const lines = block.trim().split(/\r?\n/);
        if (lines.length < 3) return null;
        const timeLine = lines[1].trim();
        const match = timeLine.match(/(\d+):(\d+):(\d+)[,\.](\d+) --> (\d+):(\d+):(\d+)[,\.](\d+)/);
        if (!match) return null;
        const toSec = (h, m, s, ms) => parseInt(h)*3600 + parseInt(m)*60 + parseInt(s) + parseInt(ms)/1000;
        return {
          start: toSec(match[1], match[2], match[3], match[4]),
          end:   toSec(match[5], match[6], match[7], match[8]),
          text:  lines.slice(2).map(l => l.trim()).filter(Boolean).join(' ')
        };
      }).filter(Boolean);
    }

    const legendas = parseSRT(SRT_DATA);

    function mesclarParaBarra(segs, maxGap, maxChars) {
      const result = [];
      let i = 0;
      while (i < segs.length) {
        let texto = segs[i].text;
        let inicio = segs[i].start;
        let fim = segs[i].end;
        while (
          i + 1 < segs.length &&
          (segs[i+1].start - segs[i].end) <= maxGap &&
          (texto + ' ' + segs[i+1].text).length <= maxChars
        ) {
          i++;
          texto += ' ' + segs[i].text;
          fim = segs[i].end;
        }
        result.push({ start: inicio, end: fim, text: texto });
        i++;
      }
      return result;
    }

    const legendasBar = mesclarParaBarra(legendas, 0.8, 130);

    const display        = document.getElementById('subtitle-display');
    const overlayText    = document.getElementById('subtitle-overlay-text');
    let intervalo = null;

    // â”€â”€â”€ YOUTUBE IFRAME API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);

    var ytPlayer;
    function onYouTubeIframeAPIReady() {
      ytPlayer = new YT.Player('yt-player', {
        events: { 'onStateChange': onPlayerStateChange }
      });
    }

    function onPlayerStateChange(event) {
      if (event.data === YT.PlayerState.PLAYING) {
        intervalo = setInterval(atualizarLegenda, 200);
      } else {
        clearInterval(intervalo);
      }
    }

    function atualizarLegenda() {
      if (!ytPlayer || !ytPlayer.getCurrentTime) return;
      const tempo = ytPlayer.getCurrentTime();
      const atual = legendasBar.find(l => tempo >= l.start && tempo <= l.end);
      const texto = atual ? atual.text : '';
      display.textContent     = texto;
      overlayText.textContent = texto; // atualiza overlay fullscreen simultaneamente
    }

    // â”€â”€â”€ CONTROLE DE FONTE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const slider  = document.getElementById('font-size-slider');
    const fontVal = document.getElementById('font-size-value');
    display.style.fontSize = slider.value + 'px';
    slider.addEventListener('input', function() {
      display.style.fontSize = this.value + 'px';
      fontVal.textContent = this.value + 'px';
    });

    // â”€â”€â”€ TRANSCRIÃ‡ÃƒO COMPLETA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function toggleTranscricao() {
      const div   = document.getElementById('transcricao-completa');
      const texto = document.getElementById('transcricao-texto');
      if (div.style.display === 'none') {
        const PAUSA = 2.0;
        const paragrafos = [];
        let atual = [];
        for (let i = 0; i < legendas.length; i++) {
          atual.push(legendas[i].text);
          const prox = legendas[i + 1];
          if (!prox || (prox.start - legendas[i].end) > PAUSA) {
            paragrafos.push(atual.join(' '));
            atual = [];
          }
        }
        const html = paragrafos.map(p => `<p class="leg-paragrafo">${p}</p>`).join('');
        texto.innerHTML = html;
        div.style.display = 'block';
      } else {
        div.style.display = 'none';
      }
    }

    // â”€â”€â”€ FULLSCREEN (FASE 2.1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Aplica fullscreen no video-container (nÃ£o na pÃ¡gina inteira)
    function toggleFullscreen() {
      const container = document.getElementById('video-container');
      const isFs = !!(document.fullscreenElement || document.webkitFullscreenElement);
      if (!isFs) {
        if (container.requestFullscreen)        container.requestFullscreen();
        else if (container.webkitRequestFullscreen) container.webkitRequestFullscreen();
      } else {
        if (document.exitFullscreen)        document.exitFullscreen();
        else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
      }
    }

    // Sincroniza botÃ£o ao entrar/sair do fullscreen
    function aoMudarFullscreen() {
      const isFs = !!(document.fullscreenElement || document.webkitFullscreenElement);
      const btn  = document.getElementById('btn-fullscreen');
      if (btn) btn.textContent = isFs ? 'â›¶ Sair da Tela Cheia' : 'â›¶ Tela Cheia c/ Legendas';
    }
    document.addEventListener('fullscreenchange',       aoMudarFullscreen);
    document.addEventListener('webkitfullscreenchange', aoMudarFullscreen);

    // â”€â”€â”€ WAKE LOCK (FASE 2.2) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let wakeLock = null;

    async function ativarWakeLock() {
      try {
        if ('wakeLock' in navigator) {
          wakeLock = await navigator.wakeLock.request('screen');
          // Reativar automaticamente se a aba voltar ao foco
          document.addEventListener('visibilitychange', async () => {
            if (document.visibilityState === 'visible' && wakeLock !== null) {
              try { wakeLock = await navigator.wakeLock.request('screen'); } catch(e) {}
            }
          }, { once: true });
        }
      } catch(e) {
        // iOS Safari e outros que nÃ£o suportam â€” silent fail (graceful degradation)
      }
    }

    async function liberarWakeLock() {
      try {
        if (wakeLock) { await wakeLock.release(); wakeLock = null; }
      } catch(e) {}
    }

    // Libera Wake Lock ao sair da pÃ¡gina
    window.addEventListener('beforeunload', liberarWakeLock);

    // â”€â”€â”€ DETECÃ‡ÃƒO DE PLATAFORMA (FASE 2.3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function detectarPlataforma() {
      const ua = navigator.userAgent;
      if (/Android/i.test(ua))           return 'android';
      if (/iPhone|iPad|iPod/i.test(ua))  return 'ios';
      return 'desktop';
    }

    const INSTRUCOES_TV = {
      android: 'ğŸ“¡ No Chrome: toque nos 3 pontinhos â†’ "Transmitir..." â†’ selecione sua TV',
      ios:     'ğŸ“º No iPhone/iPad: Central de Controle â†’ Espelhamento de Tela â†’ selecione sua Apple TV',
      desktop: 'ğŸ“¡ No Chrome: clique nos 3 pontinhos â†’ "Transmitir..." â†’ selecione sua TV ou Chromecast'
    };

    let instrucaoTimeout = null;

    function exibirInstrucaoTV() {
      const plataforma = detectarPlataforma();
      const el    = document.getElementById('instrucao-tv');
      const texto = document.getElementById('instrucao-tv-texto');
      if (el && texto) {
        texto.textContent = INSTRUCOES_TV[plataforma] || INSTRUCOES_TV.desktop;
        el.style.display = 'flex';
        // Fecha automaticamente apÃ³s 10 segundos
        clearTimeout(instrucaoTimeout);
        instrucaoTimeout = setTimeout(() => { el.style.display = 'none'; }, 10000);
      }
    }

    function fecharInstrucaoTV() {
      const el = document.getElementById('instrucao-tv');
      if (el) el.style.display = 'none';
      clearTimeout(instrucaoTimeout);
    }

    // â”€â”€â”€ TV MODE UNIFICADO (FASE 2.2 + 2.3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function ativarModoTV() {
      // 1. Fullscreen no container de vÃ­deo
      const container = document.getElementById('video-container');
      try {
        if (container.requestFullscreen)           await container.requestFullscreen();
        else if (container.webkitRequestFullscreen) container.webkitRequestFullscreen();
      } catch(e) {}

      // 2. Wake Lock (tela nÃ£o apaga)
      await ativarWakeLock();

      // 3. InstruÃ§Ã£o contextual por plataforma
      exibirInstrucaoTV();
    }

    // Libera Wake Lock ao sair do fullscreen
    document.addEventListener('fullscreenchange', () => {
      if (!document.fullscreenElement && !document.webkitFullscreenElement) {
        liberarWakeLock();
      }
    });

    // â”€â”€â”€ COPIAR LINK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function copiarLink() {
      navigator.clipboard.writeText(window.location.href).then(() => {
        alert('Link copiado!');
      });
    }

    // â”€â”€â”€ BANNER WEBVIEW WHATSAPP (FASE 3.2) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    (function detectarWebView() {
      const ua = navigator.userAgent;
      // Detecta WebView do WhatsApp, Instagram, Facebook e similares
      const isWebView =
        /FBAN|FBAV|Instagram|WhatsApp/.test(ua) ||
        (/wv/.test(ua) && /Android/.test(ua)) ||
        (typeof window.matchMedia === 'function' &&
         window.matchMedia('(display-mode: browser)').matches &&
         /Safari/i.test(ua) && !/Chrome/i.test(ua) &&
         window.navigator.standalone === false);

      if (!isWebView) return;

      const banner = document.getElementById('webview-banner');
      const link   = document.getElementById('webview-chrome-link');

      // Android: intent para abrir no Chrome
      // iOS: instruÃ§Ã£o manual (sem suporte a intent://)
      if (/Android/i.test(ua)) {
        const pageUrl = encodeURIComponent(window.location.href);
        link.href = `intent://${window.location.host}${window.location.pathname}#Intent;scheme=${window.location.protocol.replace(':','')};package=com.android.chrome;end`;
      } else {
        link.textContent = 'Abrir no Safari (e depois "Adicionar Ã  Tela Inicial")';
        link.href = window.location.href;
        link.target = '_blank';
      }

      banner.style.display = 'flex';
    })();

    // â”€â”€â”€ SERVICE WORKER (FASE 3.1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('../../service-worker.js').catch(() => {});
    }
  </script>

</body>
</html>
