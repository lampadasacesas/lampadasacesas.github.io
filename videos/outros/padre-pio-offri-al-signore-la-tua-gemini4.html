<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Padre Pio: ofereÃ§a ao Senhor o seu sofrimento e salvarÃ¡ aquela alma | LÃ¢mpadas Acesas</title>

  <!-- SEO -->
  <meta name="description" content="Homilia/palestra legendada em PT-BR. https://www.padrepio.it/

PADRE PIO TV
Emittente televisiva cattolica dei frati cappuccini di San Giovanni Rotondo.

Puoi guardare Padre Pio Tv 
sul digitale terrestre al canale 145, 
su Tv Sat al can">
  <meta name="keywords" content="catÃ³lico, evangelizaÃ§Ã£o, legenda portuguÃªs, outros">
  <meta name="author" content="LÃ¢mpadas Acesas">

  <!-- Open Graph (preview no WhatsApp, Telegram, Facebook) -->
  <meta property="og:type"        content="video.other">
  <meta property="og:title"       content="Padre Pio: ofereÃ§a ao Senhor o seu sofrimento e salvarÃ¡ aquela alma | LÃ¢mpadas Acesas">
  <meta property="og:description" content="Homilia/palestra legendada em PT-BR. https://www.padrepio.it/

PADRE PIO TV
Emittente televisiva cattolica dei frati cappuccini di San Giovanni Rotondo.

Puoi guardare Padre Pio Tv 
sul digitale terrestre al canale 145, 
su Tv Sat al can">
  <meta property="og:image"       content="https://lampadasacesas.com.br/assets/thumbnails/HnSihY54wqE.jpg">
  <meta property="og:image:width" content="1280">
  <meta property="og:image:height" content="720">
  <meta property="og:url"         content="https://lampadasacesas.com.br/videos/outros/padre-pio-offri-al-signore-la-tua-gemini4">
  <meta property="og:site_name"   content="LÃ¢mpadas Acesas">
  <meta property="og:locale"      content="pt_BR">

  <!-- Twitter Card -->
  <meta name="twitter:card"        content="summary_large_image">
  <meta name="twitter:title"       content="Padre Pio: ofereÃ§a ao Senhor o seu sofrimento e salvarÃ¡ aquela alma">
  <meta name="twitter:description" content="Homilia/palestra legendada em PT-BR. https://www.padrepio.it/

PADRE PIO TV
Emittente televisiva cattolica dei frati cappuccini di San Giovanni Rotondo.

Puoi guardare Padre Pio Tv 
sul digitale terrestre al canale 145, 
su Tv Sat al can">
  <meta name="twitter:image"       content="https://lampadasacesas.com.br/assets/thumbnails/HnSihY54wqE.jpg">

  <!-- PWA -->
  <link rel="manifest" href="../../manifest.json">
  <meta name="theme-color" content="#5a0000">
  <link rel="apple-touch-icon" href="../../assets/icon-192.png">

  <!-- Favicon -->
  <link rel="icon" href="../../assets/favicon.ico" type="image/x-icon">

  <!-- Estilos -->
  <link rel="stylesheet" href="../../assets/style.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-G8LLHBT6XH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-G8LLHBT6XH');
  </script>
</head>
<body>

  <!-- BANNER WEBVIEW (Fase 3.2) â€” visivel apenas no navegador interno do WhatsApp/Instagram -->
  <div id="webview-banner" class="webview-banner" style="display:none">
    <span>ğŸ“± Para melhor experiÃªncia (legendas + Chromecast):</span>
    <a id="webview-chrome-link" href="#" class="webview-btn">Abrir no Chrome</a>
    <button onclick="document.getElementById('webview-banner').style.display='none'" class="webview-close">âœ•</button>
  </div>

  <!-- HEADER -->
  <header class="site-header">
    <a href="../../index.html" class="logo">
      ğŸ•¯ï¸ LÃ¢mpadas Acesas
    </a>
    <nav>
      <a href="../../index.html">InÃ­cio</a>
      <a href="../outros/index.html">Outros</a>
    </nav>
  </header>

  <!-- BREADCRUMB -->
  <div class="breadcrumb">
    <a href="../../index.html">InÃ­cio</a>
    <span>â€º</span>
    <a href="../outros/index.html">Outros</a>
    <span>â€º</span>
    <span>Padre Pio: ofereÃ§a ao Senhor o seu sofrimento e sa...</span>
  </div>

  <!-- CONTEÃšDO PRINCIPAL -->
  <main class="video-page">

    <!-- TÃTULO -->
    <h1 class="video-title">Padre Pio: ofereÃ§a ao Senhor o seu sofrimento e salvarÃ¡ aquela alma</h1>
    <p class="video-meta">ğŸ“º Padre Pio TV &nbsp;|&nbsp; ğŸ“… Legendado em 01/03/2026 &nbsp;|&nbsp; ğŸŒ Legenda: PT-BR</p>

    <!-- PLAYER DO YOUTUBE -->
    <div class="video-container" id="video-container">
      <div class="video-wrapper" id="video-wrapper">
        <iframe
          id="yt-player"
          src="https://www.youtube.com/embed/HnSihY54wqE?rel=0&modestbranding=1&cc_load_policy=0&enablejsapi=1"
          title="Padre Pio: ofereÃ§a ao Senhor o seu sofrimento e salvarÃ¡ aquela alma"
          frameborder="0"
          allowfullscreen
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share">
        </iframe>

        <!-- OVERLAY DE LEGENDA ESTILO NETFLIX (Fase 2.1) -->
        <!-- VisÃ­vel apenas em fullscreen via classe CSS :fullscreen -->
        <div class="subtitle-overlay" id="subtitle-overlay" aria-live="polite">
          <span class="subtitle-overlay-text" id="subtitle-overlay-text"></span>
        </div>
      </div>

      <!-- LEGENDA SINCRONIZADA â€” BARRA ABAIXO (modo normal) -->
      <div class="subtitle-bar">
        <div id="subtitle-display" class="subtitle-text">
          â–¶ Pressione play para ver as legendas sincronizadas
        </div>
      </div>
    </div>

    <!-- CONTROLES DE LEGENDA -->
    <div class="subtitle-controls">
      <label>Tamanho da fonte:
        <input type="range" id="font-size-slider" min="12" max="32" value="22">
        <span id="font-size-value">22px</span>
      </label>
      <button id="btn-transcricao" onclick="toggleTranscricao()">ğŸ“– Ver transcriÃ§Ã£o completa</button>
      <button id="btn-fullscreen" onclick="toggleFullscreen()">â›¶ Tela Cheia c/ Legendas</button>
      <!-- BotÃ£o TV Mode (Fase 2.2) -->
      <button id="btn-tv-mode" onclick="ativarModoTV()">ğŸ“º Assistir na TV</button>
      <a href="https://www.youtube.com/watch?v=HnSihY54wqE" target="_blank" class="btn-original">
        ğŸ“º Ver no YouTube original
      </a>
    </div>

    <!-- INSTRUÃ‡ÃƒO TV (Fase 2.3) â€” aparece apÃ³s ativar TV Mode -->
    <div id="instrucao-tv" class="instrucao-tv" style="display:none">
      <span id="instrucao-tv-texto"></span>
      <button onclick="fecharInstrucaoTV()" class="instrucao-tv-close">âœ•</button>
    </div>

    <!-- TRANSCRIÃ‡ÃƒO COMPLETA (oculta por padrÃ£o) -->
    <div id="transcricao-completa" class="transcricao" style="display:none">
      <h2>ğŸ“– TranscriÃ§Ã£o completa em PT-BR</h2>
      <div id="transcricao-texto"></div>
    </div>

    <!-- COMPARTILHAR -->
    <div class="share-section">
      <h3>ğŸ“¢ Compartilhar esta evangelizaÃ§Ã£o</h3>
      <div class="share-buttons">
        <a href="https://wa.me/?text=Padre%20Pio%3A%20ofere%C3%A7a%20ao%20Senhor%20o%20seu%20sofrimento%20e%20salvar%C3%A1%20aquela%20alma%20-%20Legendado%20em%20PT-BR%0Ahttps%3A//lampadasacesas.com.br/videos/outros/padre-pio-offri-al-signore-la-tua-gemini4"
           target="_blank" class="btn-share btn-whatsapp">
          ğŸ“± WhatsApp
        </a>
        <a href="https://t.me/share/url?url=https%3A//lampadasacesas.com.br/videos/outros/padre-pio-offri-al-signore-la-tua-gemini4&text=Padre%20Pio%3A%20ofere%C3%A7a%20ao%20Senhor%20o%20seu%20sofrimento%20e%20salvar%C3%A1%20aquela%20alma%20-%20Legendado%20em%20PT-BR"
           target="_blank" class="btn-share btn-telegram">
          âœˆï¸ Telegram
        </a>
        <button onclick="copiarLink()" class="btn-share btn-copy">
          ğŸ”— Copiar link
        </button>
      </div>
    </div>

  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
    <p>ğŸ•¯ï¸ LÃ¢mpadas Acesas â€” EvangelizaÃ§Ã£o CatÃ³lica em PortuguÃªs Brasileiro</p>
    <p><small>Legendas geradas automaticamente com IA e revisÃ£o. ConteÃºdo original dos respectivos canais.</small></p>
  </footer>

  <!-- ===================================================================
       SCRIPTS
       =================================================================== -->
  <script>
    // â”€â”€â”€ DADOS SRT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const SRT_DATA = "1\n00:00:08,599 --> 00:00:11,839\nUm minuto com Padre Pio nos\n\n2\n00:00:11,939 --> 00:00:15,280\nlugares do convento de San Giovanni\nRotondo.\n\n3\n00:00:12,360 --> 00:00:17,080\nNos encontramos na clausura, neste\n\n4\n00:00:17,180 --> 00:00:18,259\nlugar, bem em frente \u00e0 janela...\n\n5\n00:00:18,359 --> 00:00:23,719\n...que d\u00e1 diretamente para a\n\n6\n00:00:23,819 --> 00:00:25,419\npra\u00e7a de Santa Maria delle Grazie.\n\n7\n00:00:25,519 --> 00:00:30,239\nHoje vamos contar um epis\u00f3dio\n\n8\n00:00:30,339 --> 00:00:32,060\nrelatado pelo Padre Alberto D'Apolito,\n\n9\n00:00:32,160 --> 00:00:36,800\nconfrade do Padre Pio, sobre uma\n\n10\n00:00:36,900 --> 00:00:41,640\nviagem de prega\u00e7\u00e3o que ele fez...\n\n11\n00:00:37,360 --> 00:00:40,720\n...na Sic\u00edlia, em Ragusa,\n\n12\n00:00:40,820 --> 00:00:44,280\nno ano de 1975.\n\n13\n00:00:41,640 --> 00:00:46,060\nEra noite e, ao fim\n\n14\n00:00:46,160 --> 00:00:47,939\ndo encontro, pediram-me para visitar...\n\n15\n00:00:48,039 --> 00:00:53,999\n...especialmente algumas mulheres de um\ngrupo\n\n16\n00:00:54,099 --> 00:00:56,500\nde pacientes com c\u00e2ncer no hospital\n\n17\n00:00:56,600 --> 00:01:00,259\nEram muitos os pedidos\n\n18\n00:01:00,359 --> 00:01:02,020\ntamb\u00e9m de outros pacientes que,\n\n19\n00:01:02,120 --> 00:01:05,400\ncom l\u00e1grimas nos\n\n20\n00:01:05,500 --> 00:01:08,880\nolhos, me pediam ora\u00e7\u00f5es.\n\n21\n00:01:06,520 --> 00:01:10,600\nTentei acalm\u00e1-las, exortando-as a ter\nmuita f\u00e9\n\n22\n00:01:10,700 --> 00:01:12,580\nno Senhor e na intercess\u00e3o de Nos\n\n23\n00:01:12,680 --> 00:01:16,100\nAproximei-me delas, uma a\n\n24\n00:01:16,200 --> 00:01:17,420\numa, dando a cada uma...\n\n25\n00:01:17,520 --> 00:01:20,899\no santinho de Padre Pio e\n\n26\n00:01:20,999 --> 00:01:24,479\nrecomendando que se confiassem \u00e0s suas\nora\u00e7\u00f5es.\n\n27\n00:01:21,720 --> 00:01:27,420\nImpressionou-me a serenidade de uma\nmulher,\n\n28\n00:01:27,520 --> 00:01:31,019\nAdelina, que sofria de cirrose hep\n\n29\n00:01:31,119 --> 00:01:33,220\ne o estado dela era muito grave.\n\n30\n00:01:33,320 --> 00:01:37,340\nEu a chamei, ela abriu os olhos, olhou\n\n31\n00:01:37,440 --> 00:01:41,560\npara mim e disse: \"Um padre capuchinho aqu\n\n32\n00:01:37,960 --> 00:01:44,040\nObrigada, obrigado Jesus por ter me\n\n33\n00:01:44,140 --> 00:01:47,220\nenviado este Vosso ministro\", disse Adelin\n\n34\n00:01:47,320 --> 00:01:52,680\nCom um fio de voz, ela conseguiu contar\nsobre\n\n35\n00:01:52,780 --> 00:01:54,940\nsua rela\u00e7\u00e3o com o Padre Pio e o fato\n\n36\n00:01:55,040 --> 00:01:59,100\nFalou v\u00e1rias vezes da alegria de se\n\n37\n00:01:59,200 --> 00:02:00,540\nconfessar com ele na escola do Padre Pio.\n\n38\n00:02:00,640 --> 00:02:04,140\nAdelina aprendeu a valorizar o sofrimento\ne,\n\n39\n00:02:04,240 --> 00:02:05,900\na cada dia, se oferecia como v\u00edtima\n\n40\n00:02:06,000 --> 00:02:10,480\npela salva\u00e7\u00e3o das almas. Ela s\u00f3 desejava o\n\n41\n00:02:10,580 --> 00:02:13,300\nencontro final com Cristo, como relata o P\n\n42\n00:02:13,400 --> 00:02:17,680\nAp\u00f3s essa conversa, quando eu estava\nsaindo\n\n43\n00:02:17,780 --> 00:02:19,540\ndo hospital, fui abordado por uma f\n\n44\n00:02:19,640 --> 00:02:25,040\nEla me pediu para ir \u00e0 ala\n\n45\n00:02:25,140 --> 00:02:27,940\nmasculina convencer um moribundo a receber\nos sacram\n\n46\n00:02:28,040 --> 00:02:32,260\nque ele recusava com raiva. Respondi\n\n47\n00:02:32,360 --> 00:02:34,859\nque minha visita seria in\u00fatil e\ncontraproducen\n\n48\n00:02:34,959 --> 00:02:39,099\npois n\u00e3o havia prepara\u00e7\u00e3o; era necess\u00e1rio\n\n49\n00:02:39,199 --> 00:02:43,440\nrealmente um milagre. Naquele momento, pen\n\n50\n00:02:39,640 --> 00:02:44,760\nPensei que seus sofrimentos e ora\u00e7\u00f5es\n\n51\n00:02:44,860 --> 00:02:48,100\npoderiam alcan\u00e7ar a gra\u00e7a da convers\u00e3o.\n\n52\n00:02:48,200 --> 00:02:51,960\ndo perd\u00e3o. Ent\u00e3o, voltei ao\n\n53\n00:02:52,060 --> 00:02:53,820\nleito de Adelina, chamei-a e lhe\n\n54\n00:02:53,920 --> 00:02:57,080\nperguntei: \"Adelina, voltei para\n\n55\n00:02:57,180 --> 00:02:58,219\nlhe pedir um favor\".\n\n56\n00:02:58,319 --> 00:03:01,980\n\"Um favor meu, se estou im\u00f3vel nesta\ncama?\" \"Sim, s\u00f3 voc\u00ea pode faz\u00ea-lo.\n\n57\n00:03:02,080 --> 00:03:05,559\nTrata-se de salvar um pecador que\n\n58\n00:03:05,659 --> 00:03:06,900\nrecusou os sacramentos e est\u00e1 desesperado.\n\n59\n00:03:07,000 --> 00:03:10,940\nOfere\u00e7a ao Senhor os seus sofrimentos e,\n\n60\n00:03:11,040 --> 00:03:15,080\ncom certeza, voc\u00ea salvar\u00e1 esta pobre alma\"\n\n61\n00:03:11,879 --> 00:03:15,839\n\"Sim, Padre, ofere\u00e7o de bom grado\n\n62\n00:03:15,939 --> 00:03:17,620\no meu sofrimento e a minha vida\".\n\n63\n00:03:17,720 --> 00:03:22,480\n\"Obrigado, Adelina\", respondeu o Padre\nAlberto.\n\n64\n00:03:22,580 --> 00:03:25,499\n\"Voc\u00ea salvou uma alma. Padre Pio,\n\n65\n00:03:25,599 --> 00:03:28,899\nEla me saudou com um doce olhar\n\n66\n00:03:28,999 --> 00:03:32,400\ne, naquela noite, o doente, com plena\nlucidez,\n\n67\n00:03:30,080 --> 00:03:36,140\npediu ao sacerdote os confortos da\n\n68\n00:03:36,240 --> 00:03:39,940\nreligi\u00e3o. Ele faleceu logo depois, no perd\n\n69\n00:03:40,040 --> 00:03:45,020\nMuitas outras almas, filhas espirituais de\n\n70\n00:03:45,120 --> 00:03:47,380\nPadre Pio espalhadas pelo mundo todo, agua\n\n71\n00:03:47,480 --> 00:03:51,480\neste supremo holocausto de suas\n\n72\n00:03:51,580 --> 00:03:52,979\nvidas, como relata o Padre Alberto.\n\n73\n00:03:53,079 --> 00:03:57,039\nNos \u00faltimos tempos de sua\n\n74\n00:03:57,139 --> 00:03:58,740\nexist\u00eancia terrena, ao ver Padre Pio,\n\n75\n00:03:58,840 --> 00:04:04,380\num penitente levado em uma cadeira\n\n76\n00:04:04,480 --> 00:04:07,699\nde rodas ao confession\u00e1rio disse: \"Padre,\npor\n\n77\n00:04:07,799 --> 00:04:11,159\nsofrimento?\" E Padre Pio respondeu: \"Para\n\n78\n00:04:11,259 --> 00:04:14,720\ndeixar uma grande heran\u00e7a aos meus filhos\"\n\n79\n00:04:12,079 --> 00:04:18,779\nPadre Pio, unido ao Redentor e como v\u00edtima\n\n80\n00:04:18,879 --> 00:04:21,259\ncom Cristo, lan\u00e7ou ao mundo que busca o pr\n\n81\n00:04:21,359 --> 00:04:25,619\numa mensagem que \u00e9 extremamente atual\nainda\n\n82\n00:04:25,719 --> 00:04:30,080\nhoje para todos os devotos de Padre\n";

    function parseSRT(srt) {
      const blocks = srt.trim().split(/\r?\n\r?\n/);
      return blocks.map(block => {
        const lines = block.trim().split(/\r?\n/);
        if (lines.length < 3) return null;
        const timeLine = lines[1].trim();
        const match = timeLine.match(/(\d+):(\d+):(\d+)[,\.](\d+) --> (\d+):(\d+):(\d+)[,\.](\d+)/);
        if (!match) return null;
        const toSec = (h, m, s, ms) => parseInt(h)*3600 + parseInt(m)*60 + parseInt(s) + parseInt(ms)/1000;
        return {
          start: toSec(match[1], match[2], match[3], match[4]),
          end:   toSec(match[5], match[6], match[7], match[8]),
          text:  lines.slice(2).map(l => l.trim()).filter(Boolean).join(' ')
        };
      }).filter(Boolean);
    }

    const legendas = parseSRT(SRT_DATA);

    function mesclarParaBarra(segs, maxGap, maxChars) {
      const result = [];
      let i = 0;
      while (i < segs.length) {
        let texto = segs[i].text;
        let inicio = segs[i].start;
        let fim = segs[i].end;
        while (
          i + 1 < segs.length &&
          (segs[i+1].start - segs[i].end) <= maxGap &&
          (texto + ' ' + segs[i+1].text).length <= maxChars
        ) {
          i++;
          texto += ' ' + segs[i].text;
          fim = segs[i].end;
        }
        result.push({ start: inicio, end: fim, text: texto });
        i++;
      }
      return result;
    }

    const legendasBar = mesclarParaBarra(legendas, 0.8, 130);

    const display        = document.getElementById('subtitle-display');
    const overlayText    = document.getElementById('subtitle-overlay-text');
    let intervalo = null;

    // â”€â”€â”€ YOUTUBE IFRAME API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);

    var ytPlayer;
    function onYouTubeIframeAPIReady() {
      ytPlayer = new YT.Player('yt-player', {
        events: { 'onStateChange': onPlayerStateChange }
      });
    }

    function onPlayerStateChange(event) {
      if (event.data === YT.PlayerState.PLAYING) {
        intervalo = setInterval(atualizarLegenda, 200);
      } else {
        clearInterval(intervalo);
      }
    }

    function atualizarLegenda() {
      if (!ytPlayer || !ytPlayer.getCurrentTime) return;
      const tempo = ytPlayer.getCurrentTime();
      const atual = legendasBar.find(l => tempo >= l.start && tempo <= l.end);
      const texto = atual ? atual.text : '';
      display.textContent     = texto;
      overlayText.textContent = texto; // atualiza overlay fullscreen simultaneamente
    }

    // â”€â”€â”€ CONTROLE DE FONTE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const slider  = document.getElementById('font-size-slider');
    const fontVal = document.getElementById('font-size-value');
    display.style.fontSize = slider.value + 'px';
    slider.addEventListener('input', function() {
      display.style.fontSize = this.value + 'px';
      fontVal.textContent = this.value + 'px';
    });

    // â”€â”€â”€ TRANSCRIÃ‡ÃƒO COMPLETA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function toggleTranscricao() {
      const div   = document.getElementById('transcricao-completa');
      const texto = document.getElementById('transcricao-texto');
      if (div.style.display === 'none') {
        const PAUSA = 2.0;
        const paragrafos = [];
        let atual = [];
        for (let i = 0; i < legendas.length; i++) {
          atual.push(legendas[i].text);
          const prox = legendas[i + 1];
          if (!prox || (prox.start - legendas[i].end) > PAUSA) {
            paragrafos.push(atual.join(' '));
            atual = [];
          }
        }
        const html = paragrafos.map(p => `<p class="leg-paragrafo">${p}</p>`).join('');
        texto.innerHTML = html;
        div.style.display = 'block';
      } else {
        div.style.display = 'none';
      }
    }

    // â”€â”€â”€ FULLSCREEN (FASE 2.1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Aplica fullscreen no video-container (nÃ£o na pÃ¡gina inteira)
    function toggleFullscreen() {
      const container = document.getElementById('video-container');
      const isFs = !!(document.fullscreenElement || document.webkitFullscreenElement);
      if (!isFs) {
        if (container.requestFullscreen)        container.requestFullscreen();
        else if (container.webkitRequestFullscreen) container.webkitRequestFullscreen();
      } else {
        if (document.exitFullscreen)        document.exitFullscreen();
        else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
      }
    }

    // Sincroniza botÃ£o ao entrar/sair do fullscreen
    function aoMudarFullscreen() {
      const isFs = !!(document.fullscreenElement || document.webkitFullscreenElement);
      const btn  = document.getElementById('btn-fullscreen');
      if (btn) btn.textContent = isFs ? 'â›¶ Sair da Tela Cheia' : 'â›¶ Tela Cheia c/ Legendas';
    }
    document.addEventListener('fullscreenchange',       aoMudarFullscreen);
    document.addEventListener('webkitfullscreenchange', aoMudarFullscreen);

    // â”€â”€â”€ WAKE LOCK (FASE 2.2) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let wakeLock = null;

    async function ativarWakeLock() {
      try {
        if ('wakeLock' in navigator) {
          wakeLock = await navigator.wakeLock.request('screen');
          // Reativar automaticamente se a aba voltar ao foco
          document.addEventListener('visibilitychange', async () => {
            if (document.visibilityState === 'visible' && wakeLock !== null) {
              try { wakeLock = await navigator.wakeLock.request('screen'); } catch(e) {}
            }
          }, { once: true });
        }
      } catch(e) {
        // iOS Safari e outros que nÃ£o suportam â€” silent fail (graceful degradation)
      }
    }

    async function liberarWakeLock() {
      try {
        if (wakeLock) { await wakeLock.release(); wakeLock = null; }
      } catch(e) {}
    }

    // Libera Wake Lock ao sair da pÃ¡gina
    window.addEventListener('beforeunload', liberarWakeLock);

    // â”€â”€â”€ DETECÃ‡ÃƒO DE PLATAFORMA (FASE 2.3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function detectarPlataforma() {
      const ua = navigator.userAgent;
      if (/Android/i.test(ua))           return 'android';
      if (/iPhone|iPad|iPod/i.test(ua))  return 'ios';
      return 'desktop';
    }

    const INSTRUCOES_TV = {
      android: 'ğŸ“¡ No Chrome: toque nos 3 pontinhos â†’ "Transmitir..." â†’ selecione sua TV',
      ios:     'ğŸ“º No iPhone/iPad: Central de Controle â†’ Espelhamento de Tela â†’ selecione sua Apple TV',
      desktop: 'ğŸ“¡ No Chrome: clique nos 3 pontinhos â†’ "Transmitir..." â†’ selecione sua TV ou Chromecast'
    };

    let instrucaoTimeout = null;

    function exibirInstrucaoTV() {
      const plataforma = detectarPlataforma();
      const el    = document.getElementById('instrucao-tv');
      const texto = document.getElementById('instrucao-tv-texto');
      if (el && texto) {
        texto.textContent = INSTRUCOES_TV[plataforma] || INSTRUCOES_TV.desktop;
        el.style.display = 'flex';
        // Fecha automaticamente apÃ³s 10 segundos
        clearTimeout(instrucaoTimeout);
        instrucaoTimeout = setTimeout(() => { el.style.display = 'none'; }, 10000);
      }
    }

    function fecharInstrucaoTV() {
      const el = document.getElementById('instrucao-tv');
      if (el) el.style.display = 'none';
      clearTimeout(instrucaoTimeout);
    }

    // â”€â”€â”€ TV MODE UNIFICADO (FASE 2.2 + 2.3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function ativarModoTV() {
      // 1. Fullscreen no container de vÃ­deo
      const container = document.getElementById('video-container');
      try {
        if (container.requestFullscreen)           await container.requestFullscreen();
        else if (container.webkitRequestFullscreen) container.webkitRequestFullscreen();
      } catch(e) {}

      // 2. Wake Lock (tela nÃ£o apaga)
      await ativarWakeLock();

      // 3. InstruÃ§Ã£o contextual por plataforma
      exibirInstrucaoTV();
    }

    // Libera Wake Lock ao sair do fullscreen
    document.addEventListener('fullscreenchange', () => {
      if (!document.fullscreenElement && !document.webkitFullscreenElement) {
        liberarWakeLock();
      }
    });

    // â”€â”€â”€ COPIAR LINK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function copiarLink() {
      navigator.clipboard.writeText(window.location.href).then(() => {
        alert('Link copiado!');
      });
    }

    // â”€â”€â”€ BANNER WEBVIEW WHATSAPP (FASE 3.2) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    (function detectarWebView() {
      const ua = navigator.userAgent;
      // Detecta WebView do WhatsApp, Instagram, Facebook e similares
      const isWebView =
        /FBAN|FBAV|Instagram|WhatsApp/.test(ua) ||
        (/wv/.test(ua) && /Android/.test(ua)) ||
        (typeof window.matchMedia === 'function' &&
         window.matchMedia('(display-mode: browser)').matches &&
         /Safari/i.test(ua) && !/Chrome/i.test(ua) &&
         window.navigator.standalone === false);

      if (!isWebView) return;

      const banner = document.getElementById('webview-banner');
      const link   = document.getElementById('webview-chrome-link');

      // Android: intent para abrir no Chrome
      // iOS: instruÃ§Ã£o manual (sem suporte a intent://)
      if (/Android/i.test(ua)) {
        const pageUrl = encodeURIComponent(window.location.href);
        link.href = `intent://${window.location.host}${window.location.pathname}#Intent;scheme=${window.location.protocol.replace(':','')};package=com.android.chrome;end`;
      } else {
        link.textContent = 'Abrir no Safari (e depois "Adicionar Ã  Tela Inicial")';
        link.href = window.location.href;
        link.target = '_blank';
      }

      banner.style.display = 'flex';
    })();

    // â”€â”€â”€ SERVICE WORKER (FASE 3.1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('../../service-worker.js').catch(() => {});
    }
  </script>

</body>
</html>
